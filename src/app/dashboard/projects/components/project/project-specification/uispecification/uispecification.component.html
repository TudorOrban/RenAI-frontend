<div class="flex flex-col space-y-4">
    <app-section-header [title]="'A. App Specification'" [depth]="0">
        <app-text-field
            label="App Name:"
            [value]="jobSpecification?.appSpecification?.appName"
            [isEditModeOn]="isEditModeOn()"
        ></app-text-field>
        <app-array-field
            label="Functional Specifications:"
            [items]="
                jobSpecification?.appSpecification?.functionalSpecifications ??
                []
            "
        ></app-array-field>
        <app-enum-field
            label="App Type:"
            [value]="jobSpecification?.appSpecification?.appType"
            [isEditModeOn]="isEditModeOn()"
            [enumOptions]="specFormatterService.getAppTypeOptions()"
        ></app-enum-field>
        <app-section-header
            title="Backend Stack"
            [depth]="1"
            [defaultIsExpanded]="false"
        >
            <app-enum-field
                label="Architecture:"
                [value]="jobSpecification?.appSpecification?.backendStack?.architecture"
                [isEditModeOn]="isEditModeOn()"
                [enumOptions]="specFormatterService.getArchitectureOptions()"
            ></app-enum-field>
            <app-section-header title="Services" [depth]="2">
                <div class="flex flex-wrap space-x-20">
                    <div
                        *ngFor="let service of jobSpecification?.appSpecification?.backendStack?.services"
                        class="flex flex-col space-y-1 pb-2"
                    >
                        <app-text-field
                            label="Name:"
                            [value]="service.name"
                            [isEditModeOn]="isEditModeOn()"
                        ></app-text-field>
                        <app-enum-field
                            label="Framework:"
                            [value]="service.framework"
                            [isEditModeOn]="isEditModeOn()"
                            [enumOptions]="specFormatterService.getBackendFrameworkOptions()"
                        ></app-enum-field>
                        <app-enum-field
                            label="Database:"
                            [value]="service.database"
                            [isEditModeOn]="isEditModeOn()"
                            [enumOptions]="specFormatterService.getServiceDatabaseOptions()"
                        ></app-enum-field>
                    </div>
                </div>
            </app-section-header>
        </app-section-header>
        <app-section-header
            title="Frontend Stack"
            [depth]="1"
            [defaultIsExpanded]="false"
        >
            <app-enum-field
                label="Framework:"
                [value]="jobSpecification?.appSpecification?.frontendStack?.framework"
                [isEditModeOn]="isEditModeOn()"
                [enumOptions]="specFormatterService.getFrontendFrameworkOptions()"
            ></app-enum-field>
        </app-section-header>
    </app-section-header>

    <app-section-header [title]="'B. Development Specification'" [depth]="0">
        <app-section-header title="Cost Speed Specification" [depth]="1">
            <app-text-field
                label="Maximum Cost ($):"
                [value]="jobSpecification?.developmentSpecification?.costSpeedSpec?.maxCostDollars?.toString() ?? 'None'"
                [isEditModeOn]="isEditModeOn()"
            ></app-text-field>
            <app-text-field
                label="Maximum Time (s):"
                [value]="jobSpecification?.developmentSpecification?.costSpeedSpec?.maxTimeSeconds?.toString() ?? 'None'"
                [isEditModeOn]="isEditModeOn()"
            ></app-text-field>
        </app-section-header>

        <app-section-header
            title="Infrastructure Specification"
            [depth]="1"
            [defaultIsExpanded]="false"
        >
            <app-section-header title="Nodes" [depth]="2">
                <div
                    *ngFor="let nodeSpec of jobSpecification?.developmentSpecification?.infrastructureSpec?.nodeSpecs"
                    class="flex flex-col space-y-2"
                >
                    <app-enum-field
                        label="Compute Type:"
                        [value]="nodeSpec.computeType"
                        [isEditModeOn]="isEditModeOn()"
                        [enumOptions]="specFormatterService.getComputeTypeOptions()"
                    ></app-enum-field>
                    <app-enum-field
                        label="Node VM Size:"
                        [value]="nodeSpec.vmSize"
                        [isEditModeOn]="isEditModeOn()"
                        [enumOptions]="specFormatterService.getNodeVMSizeOptions()"
                    ></app-enum-field>
                </div>
            </app-section-header>
        </app-section-header>

        <app-section-header
            title="Developer Zoo Specification"
            [depth]="1"
            [defaultIsExpanded]="false"
        >
            <app-section-header title="Developers" [depth]="2">
                <div
                    *ngFor="let developerSpec of jobSpecification?.developmentSpecification?.developerZooSpec?.developerSpecs"
                    class="flex flex-col space-y-1"
                >
                    <app-text-field
                        label="Developer Name:"
                        [value]="developerSpec.name"
                        [isEditModeOn]="isEditModeOn()"
                    ></app-text-field>
                    <app-text-field
                        label="Developer Description:"
                        [value]="developerSpec.description"
                        [isEditModeOn]="isEditModeOn()"
                    ></app-text-field>
                    <app-array-field
                        label="Developer Subtasks:"
                        [items]="developerSpec.subtasks"
                    ></app-array-field>
                </div>
            </app-section-header>
        </app-section-header>
    </app-section-header>
</div>
